(this["webpackJsonp@palantirnet/federated-search-react"]=this["webpackJsonp@palantirnet/federated-search-react"]||[]).push([[0],{490:function(e,t){},523:function(e,t){},634:function(e,t,a){},635:function(e,t,a){"use strict";a.r(t);a(279);var n=a(0),s=a.n(n),r=a(27),i=a.n(r),o=a(90),l=a(3),c=a(4),u=a(5),d=a(7),m=a(6),h=(a(96),a(97),a(274)),p=a.n(h),f=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"dateFormat",value:function(e){if("undefined"!==typeof e)return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(Date.parse(e))}},{key:"getCanonicalLink",value:function(e){var t=this.props.hostname;if(Object.hasOwnProperty.call(e,"ss_canonical_url")&&e.ss_canonical_url)return e.ss_canonical_url;if(Object.hasOwnProperty.call(e,"sm_urls")&&Array.isArray(e.sm_urls)){var a=e.sm_urls.find((function(e){return p.a.parse(e).hostname===t}));return a||e.sm_urls[0]}return Object.hasOwnProperty.call(e,"ss_url")&&e.ss_url?e.ss_url:""}},{key:"intersperse",value:function(e,t){return 0===e.length?[]:e.slice(1).reduce((function(e,a,n){return e.concat([t,a])}),[e[0]])}},{key:"renderSitenameLinks",value:function(e,t,a){if(null!=e&&null!=t)for(var n=[],r=0;r<e.length;r++)n.push(s.a.createElement("a",{className:"tag site",href:t[r],key:r},e[r])),e.length;return null!=a?a:null}},{key:"render",value:function(){var e=this,t=this.props,a=t.doc,n=t.highlight;return s.a.createElement("li",{className:"search-card",onClick:function(){return e.props.onSelect(a)}},a.ss_federated_image&&s.a.createElement("div",{className:"img"},s.a.createElement("img",{src:a.ss_federated_image})),s.a.createElement("div",{className:"text"},a.sm_department&&s.a.createElement("div",{className:"tags tags--comma"},s.a.createElement("p",null,Array.isArray(a.sm_department)?a.sm_department.map((function(e){return s.a.createElement("span",{className:"tag department"},e)})):s.a.createElement("span",{className:"tag department"},"BMC"))),s.a.createElement("h3",{className:"heading"},s.a.createElement("a",{href:this.getCanonicalLink(a),dangerouslySetInnerHTML:{__html:a.ss_federated_title}})),s.a.createElement("p",{className:"summary",dangerouslySetInnerHTML:{__html:a.ss_summary}}),n.tm_rendered_item&&s.a.createElement("blockquote",{cite:this.getCanonicalLink(a),className:"excerpt highlight",dangerouslySetInnerHTML:{__html:n.tm_rendered_item}}),s.a.createElement("div",{className:"meta tags tags--pipe"},s.a.createElement("cite",{className:"tags tags--list citation"},this.renderSitenameLinks(a.sm_site_name,a.sm_urls,a.ss_site_name)),s.a.createElement("span",{className:"tag date"},this.dateFormat(a.ds_federated_date)),s.a.createElement("span",{className:"tag type"},a.sm_federated_type))))}}]),a}(s.a.Component),g=a(14),v=a(42),_=a.n(v),y=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M17.545 15.467l-3.779-3.779a6.15 6.15 0 0 0 .898-3.21c0-3.417-2.961-6.377-6.378-6.377A6.185 6.185 0 0 0 2.1 8.287c0 3.416 2.961 6.377 6.377 6.377a6.15 6.15 0 0 0 3.115-.844l3.799 3.801a.953.953 0 0 0 1.346 0l.943-.943c.371-.371.236-.84-.135-1.211zM4.004 8.287a4.282 4.282 0 0 1 4.282-4.283c2.366 0 4.474 2.107 4.474 4.474a4.284 4.284 0 0 1-4.283 4.283c-2.366-.001-4.473-2.109-4.473-4.474z"}))}}]),a}(s.a.Component),b=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={value:""},n.handleInputChange=n.handleInputChange.bind(Object(g.a)(n)),n.handleInputKeyDown=n.handleInputKeyDown.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"handleInputChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleInputKeyDown",value:function(e){13===e.keyCode&&this.handleSubmit()}},{key:"handleSubmit",value:function(){this.props.onChange(this.props.field,this.state.value);var e=_.a.parse(window.location.search);e.search=this.state.value;var t=_.a.stringify(e);if(window.history.pushState){var a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?").concat(t);window.history.pushState({path:a},"",a)}else window.location.search=t}},{key:"render",value:function(){var e=this.props.label;return s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{htmlFor:"search",className:"fs-search-form__label"},e),s.a.createElement("div",{className:"fs-search-form__input-wrapper"},s.a.createElement("input",{type:"search",name:"search",id:"search",className:"fs-search-form__input",autoFocus:!0,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,value:this.state.value||""}),s.a.createElement("button",{type:"submit",className:"fs-search-form__submit",onClick:this.handleSubmit},s.a.createElement("span",{className:"screen-hide"},"Perform Search"),s.a.createElement(y,null))))}}]),a}(s.a.Component);b.defaultProps={label:"",onChange:function(){},value:""};var E=b,w=a(275),C=a.n(w),S=a(276),k=a.n(S),N=a(107),O=["sm_site_name","sm_federated_type","sm_department","sm_federated_terms"],j={getParsedQsAndParams:function(){var e=_.a.parse(window.location.search,{arrayFormat:"bracket"});return{parsed:e,params:Object.entries(e)}},getFieldQsInfo:function(e){var t=e.field,a=e.values,n=e.value,s=a.indexOf(n),r=j.getParsedQsAndParams(),i=r.parsed,o=r.params;return{foundIdx:s,parsed:i,isQsParamField:O.find((function(e){return e===t})),param:o.find((function(e){return e[0]===t}))}},addValueToQsParam:function(e){var t=e.field,a=e.value,n=e.param,s=e.parsed;return"object"!==typeof n[1]&&a!==n[1]&&(s[t]=a),"object"!==typeof n[1]||n[1].includes(a)||(n[1].push(a),s[t]=Object(N.a)(n[1])),s},addQsParam:function(e){var t=e.field,a=e.value,n=e.parsed,s=t.split("_")[0],r="m"===s.charAt(s.length-1);return r||(n[t]=a),r&&(n[t]=[a]),n},removeValueFromQsParam:function(e){var t=e.field,a=e.value,n=e.param,s=e.parsed;return"object"!==typeof n[1]&&a===n[1]&&delete s[t],"object"===typeof n[1]&&n[1].includes(a)&&(s[t]=n[1].filter((function(e){return e!==a}))),s},addNewUrlToBrowserHistory:function(e){var t=_.a.stringify(e,{arrayFormat:"bracket"});if(window.history.pushState){var a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?").concat(t);window.history.pushState({path:a},"",a)}else window.location.search=t},setFieldStateFromQs:function(e){var t=e.params,a=e.searchField,n=a,s=t.find((function(e){return e[0]===a.field}));if(s){if(n.collapse=!1,n.value=a.value||[],"object"===typeof s[1]||a.value.find((function(e){return e===s[1]}))||n.value.push(decodeURI(s[1])),"object"===typeof s[1]&&a.value!==s[1]){if("sm_federated_terms"===a.field){var r=[];s[1].forEach((function(e){r.push(e.split(">")[0])})),n.expandedHierarchies=r}var i=s[1].map((function(e){return decodeURI(e)}));n.value=Object(N.a)(i)}}else delete n.value,n.collapse=!0;return n}},F={highlightText:function(e,t){if(!t.toString().trim())return s.a.createElement("span",null,e);var a=e.split(new RegExp("(".concat(t,")"),"gi"));return s.a.createElement("span",null," ",a.map((function(e,a){return s.a.createElement("span",{key:a,style:e.toLowerCase()===t.toString().toLowerCase()?{fontWeight:"bold"}:{}},e)})))},filterFieldsWithQsState:O,qs:j},x=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={value:"",suggestions:[],reset:!1},n.getSuggestionValue=n.getSuggestionValue.bind(Object(g.a)(n)),n.handleInputKeyDown=n.handleInputKeyDown.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n.loadSuggestions=n.loadSuggestions.bind(Object(g.a)(n)),n.onChange=n.onChange.bind(Object(g.a)(n)),n.onSuggestionSelected=n.onSuggestionSelected.bind(Object(g.a)(n)),n.onSuggestionsFetchRequested=n.onSuggestionsFetchRequested.bind(Object(g.a)(n)),n.onSuggestionsClearRequested=n.onSuggestionsClearRequested.bind(Object(g.a)(n)),n.renderSuggestion=n.renderSuggestion.bind(Object(g.a)(n)),n.renderSuggestionsContainer=n.renderSuggestionsContainer.bind(Object(g.a)(n)),n.shouldRenderSuggestions=n.shouldRenderSuggestions.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=!1;null!==e.value&&(this.setState({reset:!0}),t=!1),null===e.value&&!0===this.state.reset&&(this.setState({value:"",suggestions:[],reset:!1}),t=!0),""===this.state.value&&null===this.props.value||!1!==t||this.setState({value:e.suggestQuery&&e.suggestQuery.value?e.suggestQuery.value:e.value,suggestions:e.suggestions?e.suggestions.docs:this.state.suggestions})}},{key:"onChange",value:function(e,t){var a=t.newValue;"type"===t.method&&(this.setState({value:a}),this.props.suggestQuery.value=a)}},{key:"onSuggestionsFetchRequested",value:function(e){var t=e.value;this.loadSuggestions(t)}},{key:"onSuggestionSelected",value:function(e,t){var a=t.suggestion,n=t.method;"result"!==this.props.autocomplete.mode||13!==e.keyCode&&"click"!==n||(e.preventDefault(),e.stopPropagation(),window.location.assign(a.sm_urls[0]))}},{key:"onSuggestionsClearRequested",value:function(){this.setState({suggestions:[]})}},{key:"getSuggestionValue",value:function(e){var t=this.props.autocomplete.mode;return"result"!==t&&("term"===t&&e.ss_federated_title)}},{key:"loadSuggestions",value:function(e){this.props.onSuggest(this.props.query,this.props.autocomplete,e)}},{key:"handleInputKeyDown",value:function(e){13!==e.keyCode||e.defaultPrevented||this.handleSubmit(),27===e.keyCode&&this.onSuggestionsClearRequested()}},{key:"handleSubmit",value:function(){this.props.onChange(this.props.field,this.state.value);var e=_.a.parse(window.location.search);e.search=this.state.value;var t=_.a.stringify(e);if(window.history.pushState){var a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?").concat(t);window.history.pushState({path:a},"",a)}else window.location.search=t}},{key:"shouldRenderSuggestions",value:function(e){var t=this.props.autocomplete.numChars||2;return e.trim().length>t}},{key:"renderSuggestionsContainer",value:function(e){var t=e.containerProps,a=e.children,n=e.query,r=this.props.autocomplete.mode,i=Object.hasOwnProperty.call(this.props.autocomplete,"result"),o=Object.hasOwnProperty.call(this.props.autocomplete,"term"),l=i&&this.props.autocomplete.result.titleText?this.props.autocomplete.result.titleText:"What are you looking for?",c=!i||!Object.hasOwnProperty.call(this.props.autocomplete.result,"showDirectionsText")||this.props.autocomplete.result.showDirectionsText,u=o&&this.props.autocomplete.term.titleText?this.props.autocomplete.term.titleText:"Suggested search terms",d=!o||!Object.hasOwnProperty.call(this.props.autocomplete.term,"showDirectionsText")||this.props.autocomplete.term.showDirectionsText,m="term"===r?u:l,h="term"===r?d:c,p=h?"react-autosuggest__suggestions-itemslist-wrapper react-autosuggest__suggestions-itemslist-wrapper--with-directions":"react-autosuggest__suggestions-itemslist-wrapper";return s.a.createElement("div",t,s.a.createElement("div",{className:"react-autosuggest__container-title"},m,s.a.createElement("button",{className:"react-autosuggest__container-close-button",onClick:this.onSuggestionsClearRequested},"x")),s.a.createElement("div",{className:p},a),h&&s.a.createElement("div",{className:"react-autosuggest__container-directions"},s.a.createElement("span",{className:"react-autosuggest__container-directions-item"},"Press ",s.a.createElement("code",null,"ENTER")," to search for ",s.a.createElement("strong",null,n)," or ",s.a.createElement("code",null,"ESC")," to close."),s.a.createElement("span",{className:"react-autosuggest__container-directions-item"},"Press \u2191 and \u2193 to highlight a suggestion then ",s.a.createElement("code",null,"ENTER")," to be redirected to that suggestion.")))}},{key:"renderSuggestion",value:function(e,t){var a=t.query,n=this.props.autocomplete.mode,r=C.a.decode(e.ss_federated_title),i=F.highlightText(r,a),o=this.state.suggestions.indexOf(e)+1,l=this.state.suggestions.length;return"term"===n?s.a.createElement("span",null,"highlightedTitle"):s.a.createElement("a",{className:"react-autosuggest__suggestion-link",href:e.sm_urls[0]},i,s.a.createElement("span",{className:"screen-hide"}," (".concat(o," of ").concat(l,")")))}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.suggestQuery,r=this.state,i=r.suggestions,o=r.value,l={type:"search",name:"search",id:"search",className:"react-autosuggest__input",onChange:this.onChange,onKeyDown:this.handleInputKeyDown,value:o||"",role:"combobox","aria-autocomplete":"both"};return s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{htmlFor:"search",className:"fs-search-form__label"},t),s.a.createElement("div",{className:"fs-search-form__autocomplete-container"},s.a.createElement(k.a,{focusInputOnSuggestionClick:!1,getSuggestionValue:this.getSuggestionValue,inputProps:l,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionSelected:this.onSuggestionSelected,renderInputComponent:a.renderInputComponent,renderSuggestion:this.renderSuggestion,renderSuggestionsContainer:this.renderSuggestionsContainer,shouldRenderSuggestions:this.shouldRenderSuggestions,suggestQuery:n,suggestions:i}),s.a.createElement("button",{type:"submit",className:"fs-search-form__submit",onClick:this.handleSubmit},s.a.createElement("span",{className:"screen-hide"},"Perform Search"),s.a.createElement(y,null))))}}],[{key:"renderInputComponent",value:function(e){return s.a.createElement("div",{className:"fs-search-form__input-wrapper"},s.a.createElement("input",e))}}]),a}(s.a.Component);x.defaultProps={label:"Enter a search term",value:"",suggestQuery:{value:""}};var P=x,D=function(e){var t=e.autocomplete?P:E;return s.a.createElement(t,e)},I=a(2),L=a.n(I),T=a(76),R=a.n(T),H=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={filter:"",truncateFacetListsAt:e.truncateFacetListsAt},n}return Object(u.a)(a,[{key:"handleClick",value:function(e){var t=F.qs.getFieldQsInfo({field:this.props.field,values:this.props.value,value:e}),a=t.foundIdx,n=t.parsed,s=t.isQsParamField,r=t.param,i=n;s&&(a<0?(i=r?F.qs.addValueToQsParam({field:this.props.field,value:e,param:r,parsed:n}):F.qs.addQsParam({field:this.props.field,value:e,parsed:n}),this.props.onChange(this.props.field,this.props.value.concat(e))):(r&&(i=F.qs.removeValueFromQsParam({field:this.props.field,value:e,param:r,parsed:n})),this.props.onChange(this.props.field,this.props.value.filter((function(e,t){return t!==a})))),F.qs.addNewUrlToBrowserHistory(i))}},{key:"toggleExpand",value:function(e){if(this.props.onSetCollapse(this.props.field,!this.props.collapse),e){var t=this.props.expandedHierarchies.indexOf(e);t>-1?this.props.expandedHierarchies.splice(t,1):this.props.expandedHierarchies.push(e)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.facets,r=t.field,i=t.value,o=t.collapse,l=t.hierarchy,c=t.options,u=this.state.truncateFacetListsAt,d=c.siteList,m=n.filter((function(e,t){return t%2===1})),h=n.filter((function(e,t){return t%2===0})),p={};if("sm_site_name"===r&&d.length>0){if(h.forEach((function(e,t){var a=h[t];d.indexOf(e)>-1&&(p[a]=m[t])})),i.length<1&&Object.keys(p).length<2)return null}else h.forEach((function(e,t){var a=h[t];p[a]=m[t]}));var f=!o,g=f?"auto":0;if(l){var v=[],_={};h.forEach((function(t,a){var n=t.split(">");v.push(n[0]),Object.hasOwnProperty.call(_,n[0])||(_[n[0]]={},_[n[0]].items=[],_[n[0]].expanded=e.props.expandedHierarchies.indexOf(n[0])>-1,_[n[0]].height=_[n[0]].expanded?"auto":0),_[n[0]].items.push({term:n[1],facetValue:t,facetCount:m[a]})}));var y=v.filter((function(e,t,a){return a.indexOf(e)===t})).filter(String),b=[],E=[];return y.forEach((function(t,n){E[t]=[],_[t].items.forEach((function(a,n){return a.facetCount&&E[t].push(s.a.createElement("li",{className:"fs-search-accordion__content-item",key:"".concat(a.term,"_").concat(a.facetValue,"_").concat(n)},s.a.createElement("label",{className:"fs-search-accordion__checkbox-label"},s.a.createElement("input",{type:"checkbox",name:t,className:"fs-search-accordion__checkbox-input",value:a.facetValue,checked:i.indexOf(a.facetValue)>-1,onChange:function(){return e.handleClick(a.facetValue)}})," ",a.term,s.a.createElement("span",{className:"facet-item-amount"}," (",a.facetCount,s.a.createElement("span",{className:"screen-hide"},"results"),")"))))})),E[t].length&&b.push(s.a.createElement("li",{className:"fs-search-accordion__content-item",id:"solr-list-facet-".concat(t),key:"solr-list-facet-".concat(t,"-").concat(n)},s.a.createElement("div",{tabIndex:"0",className:L()("fs-search-accordion__title",{"js-fs-search-accordion-open":_[t].expanded}),id:a.replace(/\s+/g,"-").toLowerCase(),onClick:e.toggleExpand.bind(e,t),onKeyDown:function(a){13===a.keyCode&&e.toggleExpand(t)}},s.a.createElement("span",{className:"screen-hide"},"Toggle filter group for")," ",t),s.a.createElement(R.a,{duration:600,height:_[t].height},s.a.createElement("ul",{className:"fs-search-accordion__content",key:"solr-list-facet-".concat(t,"-ul")},E[t]))))})),b}return s.a.createElement("li",{className:"fs-search-accordion__group-item",id:"solr-list-facet-".concat(r)},s.a.createElement("div",{tabIndex:"0",className:L()("fs-search-accordion__title",{"js-fs-search-accordion-open":f}),id:a.replace(/\s+/g,"-").toLowerCase(),onClick:this.toggleExpand.bind(this),onKeyDown:function(t){13===t.keyCode&&e.toggleExpand()}},s.a.createElement("span",{className:"screen-hide"},"Toggle filter group for")," ",a),s.a.createElement(R.a,{duration:600,height:g},s.a.createElement("ul",{className:"fs-search-accordion__content",key:"solr-list-facet-".concat(r,"-ul")},h.filter((function(e,t){return p[e]>0&&(u<0||t<u)})).map((function(t,a){return 0===e.state.filter.length||t.toLowerCase().indexOf(e.state.filter.toLowerCase())>-1?s.a.createElement("li",{className:"fs-search-accordion__content-item",key:"".concat(t,"_").concat(p[t])},s.a.createElement("label",{className:"fs-search-accordion__checkbox-label"},s.a.createElement("input",{type:"checkbox",name:r,value:t,checked:i.indexOf(t)>-1,onChange:function(){return e.handleClick(t)}})," ",t,s.a.createElement("span",{className:"facet-item-amount"}," (",p[t],s.a.createElement("span",{className:"screen-hide"},"results"),")"))):null})))))}}]),a}(s.a.Component);H.defaultProps={hierarchy:!1,expandedHierarchies:[],value:[]};var M=H,q=a(11),A=a.n(q),Q=(a(511),a(277)),B=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={filter:"",truncateFacetListsAt:e.truncateFacetListsAt,startDate:null,endDate:null,focusedInput:null},n}return Object(u.a)(a,[{key:"toggleExpand",value:function(){this.props.onSetCollapse(this.props.field,!this.props.collapse)}},{key:"handleCalendarClose",value:function(e){if(null!==e.startDate&&null!==e.endDate){var t=A()(e.startDate).subtract({hours:12}).format("YYYY-MM-DDTHH:mm:ss")+"Z",a=A()(e.endDate).add({hours:11,minutes:59,seconds:59}).format("YYYY-MM-DDTHH:mm:ss")+"Z";this.props.onChange(this.props.field,[t,a])}}},{key:"handleDatesChange",value:function(e,t){this.setState({startDate:e,endDate:t}),null===e&&null===t&&this.props.onChange(this.props.field,[])}},{key:"componentDidUpdate",value:function(e){this.props.value.length&&!e.value.length&&this.setState({startDate:null,endDate:null})}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.facets,r=t.field,i=!t.collapse,o=i?"auto":0,l=void 0,c=void 0,u=2,d=function(){return A()().subtract(1,"months")};return window.matchMedia("(max-width: 600px)").matches&&(u=1,l="vertical",c=!0,d=void 0),s.a.createElement("li",{className:"fs-search-accordion__group-item",id:"solr-list-facet-".concat(r)},s.a.createElement("div",{tabIndex:"0",className:L()("fs-search-accordion__title",{"js-fs-search-accordion-open":i}),id:a.replace(/\s+/g,"-").toLowerCase(),onClick:this.toggleExpand.bind(this),onKeyDown:function(t){13===t.keyCode&&e.toggleExpand()}},a),s.a.createElement(R.a,{duration:600,height:o},s.a.createElement("ul",{className:"fs-search-accordion__content"},s.a.createElement("li",{className:"fs-search-accordion__content-item"},s.a.createElement(Q.DateRangePicker,{startDate:this.state.startDate,startDateId:"solr-start-date",endDate:this.state.endDate,endDateId:"solr-end-date",onDatesChange:function(t){var a=t.startDate,n=t.endDate;return e.handleDatesChange(a,n)},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},isOutsideRange:function(e){var t=A()().format("YYYY-MM-DD");return e.diff(t,"days")>0||A()(e).isBefore(n[0])},minimumNights:0,small:!0,showClearDates:!0,onClose:function(t){return e.handleCalendarClose(t)},phrases:{calendarLabel:"Calendar",chooseAvailableStartDate:function(e){var t=e.date;return"Choose ".concat(t," as your search filter start date.")},chooseAvailableEndDate:function(e){var t=e.date;return"Choose ".concat(t," as your search filter end date.")},clearDates:"Clear Dates",closeDatePicker:"Close",dateIsSelected:function(e){var t=e.date;return"You have selected ".concat(t,".")},dateIsUnavailable:function(e){var t=e.date;return"Sorry, ".concat(t," is unavailable.")},enterKey:"Enter key",escape:"Escape key",focusStartDate:"Interact with the calendar and add the check-in date for your trip.",hideKeyboardShortcutsPanel:"Close the shortcuts panel.",homeEnd:"Home and end keys",jumpToNextMonth:"Move forward to switch to the next month.",jumpToPrevMonth:"Move backward to switch to the previous month.",keyboardNavigationInstructions:"Press the down arrow key to interact with the calendar and\n  select a date. Press the question mark key to get the keyboard shortcuts for changing dates.",keyboardShortcuts:"Keyboard Shortcuts",leftArrowRightArrow:"Right and left arrow keys",moveFocusByOneDay:"Move backward (left) and forward (right) by one day.",moveFocusByOneMonth:"Switch months.",moveFocusByOneWeek:"Move backward (up) and forward (down) by one week.",moveFocustoStartAndEndOfWeek:"Go to the first or last day of a week.",openThisPanel:"Open this panel.",pageUpPageDown:"page up and page down keys",questionMark:"Question mark",returnFocusToInput:"Return to the date input field.",selectFocusedDate:"Select the date in focus.",showKeyboardShortcutsPanel:"Open the keyboard shortcuts panel.",upArrowDownArrow:"up and down arrow keys"},initialVisibleMonth:d,numberOfMonths:u,orientation:l,withFullScreenPortal:c})))))}}]),a}(s.a.Component);B.defaultProps={value:[]};var K=B,V=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var s=window.innerWidth;return n.state={expanded:s>900},n.handleClick=n.handleClick.bind(Object(g.a)(n)),window.addEventListener("resize",(function(){var e="auto";window.innerWidth<900&&(e=0),n.setState({expanded:e})})),n}return Object(u.a)(a,[{key:"handleClick",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this.props.onNewSearch,t=this.state.expanded?"auto":0;return s.a.createElement("div",{className:"fs-search-filters"},s.a.createElement("button",{className:L()("fs-search-filters__trigger",{"js-fs-search-filters-open":this.state.expanded}),onClick:this.handleClick},this.props.title?this.props.title:"Filter Results"),s.a.createElement(R.a,{duration:450,height:t},s.a.createElement("form",{className:"fs-search-filters__form"},s.a.createElement("section",{className:"fs-search-accordion","aria-labelledby":"fs-section-title"},s.a.createElement("div",{className:"fs-search-filters__row"},s.a.createElement("h2",{className:"fs-search-filters__title",id:"fs-section-title"},this.props.title?this.props.title:"Filter Results")),this.props.resultsCount>0?s.a.createElement("ul",{className:"fs-search-accordion__group"},this.props.children):s.a.createElement("div",{className:"fs-search-filters__no-results"},"There are no results to filter.")),this.props.resultsCount>0?s.a.createElement("div",{className:"fs-search-filters__row"},s.a.createElement("button",{className:"fs-search-filters__reset",type:"button",onClick:e},"Clear All")):null)))}}]),a}(s.a.Component),Y=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",{className:"screen-hide"},"Search results"),s.a.createElement("ul",{className:"fs-search-results"},this.props.children))}}]),a}(s.a.Component),U=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M16.1 4.5c.4.4.5 1 0 1.6L12.3 10l3.7 3.9c.5.5.4 1.1 0 1.6-.4.4-1.2.4-1.6 0-.4-.4-4.5-4.7-4.5-4.7-.2-.2-.3-.5-.3-.8s.1-.6.3-.8c0 0 4.1-4.3 4.5-4.7.5-.4 1.2-.4 1.7 0z"}),s.a.createElement("path",{d:"M10.1 4.5c.4.4.5 1 0 1.6L6.3 10l3.7 3.9c.5.5.4 1.1 0 1.6-.4.4-1.2.4-1.6 0-.4-.4-4.5-4.7-4.5-4.7-.2-.2-.3-.5-.3-.8s.1-.6.3-.8c0 0 4.1-4.3 4.5-4.7.5-.4 1.2-.4 1.7 0z"}))},W=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M12.452 4.516c.446.436.481 1.043 0 1.576L8.705 10l3.747 3.908c.481.533.446 1.141 0 1.574-.445.436-1.197.408-1.615 0-.418-.406-4.502-4.695-4.502-4.695a1.095 1.095 0 0 1 0-1.576s4.084-4.287 4.502-4.695c.418-.409 1.17-.436 1.615 0z"}))},z=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.163 4.516c.418.408 4.502 4.695 4.502 4.695a1.095 1.095 0 0 1 0 1.576s-4.084 4.289-4.502 4.695c-.418.408-1.17.436-1.615 0-.446-.434-.481-1.041 0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141 0-1.576.445-.436 1.197-.409 1.615 0z"}))},G=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M5.6 4.5c.4.4 4.5 4.7 4.5 4.7.2.2.3.5.3.8s-.1.6-.3.8c0 0-4.1 4.3-4.5 4.7-.4.4-1.2.4-1.6 0-.4-.4-.5-1 0-1.6L7.7 10 3.9 6.1c-.4-.5-.4-1.1 0-1.6.5-.4 1.2-.4 1.7 0z"}),s.a.createElement("path",{d:"M11.6 4.5c.4.4 4.5 4.7 4.5 4.7.2.2.3.5.3.8s-.1.6-.3.8c0 0-4.1 4.3-4.5 4.7-.4.4-1.2.4-1.6 0-.4-.4-.5-1 0-1.6l3.7-3.9-3.8-3.9c-.4-.5-.4-1.1 0-1.6.5-.4 1.2-.4 1.7 0z"}))},J=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).buildHandleEnterKeyPress=function(e){return function(t){"Enter"===t.key&&e()}},e}return Object(u.a)(a,[{key:"onPageChange",value:function(e,t){e>=t||e<0||(this.props.onChange(e),null!=document.getElementById("stat")&&document.getElementById("stat").focus({preventScroll:!1}))}},{key:"renderPage",value:function(e,t,a){var n=e===t;return s.a.createElement("li",{className:L()("pagination__control",n?"is-active":"not-active"),key:a},s.a.createElement("button",{className:L()("pagination__control-button pagination__control-button--number"),tabIndex:"0",onClick:this.onPageChange.bind(this,e),onKeyPress:this.buildHandleEnterKeyPress(this.onPageChange.bind(this,e)),title:n?"Current page":"Go to page ".concat(e+1),"aria-current":n?e+1:void 0},s.a.createElement("span",{className:"screen-hide"},"Page"),e+1))}},{key:"render",value:function(){var e=this,t=this.props,a=t.query,n=t.results,r=a.start,i=a.rows,o=n.numFound,l=Math.ceil(o/i),c=r/i,u=this.props.options.paginationButtons||5,d=c-2<0?0:c-2,m=d+u>l?l:d+u;m-d<u&&d>0&&(d=m-u)<0&&(d=0);for(var h=[],p=d;p<m;p++)h.indexOf(p)<0&&h.push(p);var f=0===c,g=c-1<0,v=c+1>=l,_=0===l||c===l-1;return s.a.createElement("nav",{className:"pagination",role:"navigation","aria-labelledby":"pagination__heading"},s.a.createElement("h4",{id:"pagination__heading"},"Pagination"),s.a.createElement("ul",{className:"pagination__controls"},s.a.createElement("li",{className:L()("pagination__control pagination__control--first",{"screen-hide":f}),key:"start"},s.a.createElement("button",{className:L()("pagination__control-button pagination__control-button--first"),tabIndex:f?"-1":"0",onClick:this.onPageChange.bind(this,0),onKeyPress:this.buildHandleEnterKeyPress(this.onPageChange.bind(this,0)),title:"Go to first page"},s.a.createElement("span",{className:"screen-hide"},"First page"),s.a.createElement("span",{"aria-hidden":f?"true":"false"},s.a.createElement(U,null)))),s.a.createElement("li",{className:L()("pagination__control pagination__control--previous",{"screen-hide":g}),key:"prev"},s.a.createElement("button",{className:L()("pagination__control-button pagination__control-button--prev"),tabIndex:g?"-1":"0",onClick:this.onPageChange.bind(this,c-1),onKeyPress:this.buildHandleEnterKeyPress(this.onPageChange.bind(this,c-1)),title:"Go to previous page",rel:"previous"},s.a.createElement("span",{className:"screen-hide"},"Previous page"),s.a.createElement("span",{"aria-hidden":g?"true":"false"},s.a.createElement(W,null)))),h.map((function(t,a){return e.renderPage(t,c,a)})),s.a.createElement("li",{className:L()("pagination__control pagination__control--next",{"screen-hide":v}),key:"next"},s.a.createElement("button",{className:L()("pagination__control-button pagination__control-button--next"),tabIndex:v?"-1":"0",onClick:this.onPageChange.bind(this,c+1,l),onKeyPress:this.buildHandleEnterKeyPress(this.onPageChange.bind(this,c+1,l)),title:"Go to next page",rel:"next"},s.a.createElement("span",{className:"screen-hide"},"Next page"),s.a.createElement("span",{"aria-hidden":v?"true":"false"},s.a.createElement(z,null)))),s.a.createElement("li",{className:L()("pagination__control pagination__control--last",{"screen-hide":_}),key:"end"},s.a.createElement("button",{className:L()("pagination__control-button pagination__control-button--last"),tabIndex:_?"-1":"0",onClick:this.onPageChange.bind(this,l-1),onKeyPress:this.buildHandleEnterKeyPress(this.onPageChange.bind(this,l-1)),title:"Go to last page"},s.a.createElement("span",{className:"screen-hide"},"Last page"),s.a.createElement("span",{"aria-hidden":_?"true":"false"},s.a.createElement(G,null))))))}}]),a}(s.a.Component),Z=a(89);var X=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.numFound,a=e.start,n=e.rows,r=e.noResultsText,i=e.termValue,o=a/n,l=Math.ceil(t/n);return s.a.createElement(s.a.Fragment,null,function(e,t,a,n,r,i){var o="",l="";return t>a?(l="Showing page ".concat(e+1," of ").concat(n," (").concat(t," results)."),o=s.a.createElement("span",null,"Showing page",s.a.createElement("b",null," ",e+1)," of",s.a.createElement("b",null," ",n)," (",s.a.createElement("b",null,t)," results).")):t<=a&&t>1?(l="Showing ".concat(t," results."),o=s.a.createElement("span",null,"Showing ",s.a.createElement("b",null,t)," results.")):1===t?(l="Showing ".concat(t," result."),o=s.a.createElement("span",null,"Showing ",s.a.createElement("b",null,t)," result.")):0===t&&(l=o=r||"Sorry, your search yielded no results."),l=i?l:"",s.a.createElement(s.a.Fragment,null,s.a.createElement(Z.b,{message:l,"aria-live":"polite"}),s.a.createElement("p",{id:"stat",tabIndex:"-1",className:"fs-search-results-stat"},o))}(o,t,n,l,r,i))}}]),a}(s.a.Component);X.defaultProps={start:0};var $=X,ee=function(e){return s.a.createElement("button",{className:"fs-applied-filters__filter",key:e.id,onClick:e.onClick},s.a.createElement("span",{className:"screen-hide"},"Remove filter"),e.children)},te=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"removeListFacetValue",value:function(e,t,a){this.props.announcePolite("Removed ".concat(e.value," filter."));var n=F.qs.getFieldQsInfo({field:e,values:t,value:a}),s=n.foundIdx,r=n.parsed,i=n.isQsParamField,o=n.param;if(s>-1){if(i&&o){var l=F.qs.removeValueFromQsParam({field:e,value:a,param:o,parsed:r});F.qs.addNewUrlToBrowserHistory(l)}this.props.onChange(e,t.filter((function(e,t){return t!==s})))}}},{key:"render",value:function(){var e=this,t=this.props.searchField;return t.value.map((function(a,n){return s.a.createElement(ee,{key:n,id:n,onClick:function(){return e.removeListFacetValue(t.field,t.value,a)}},a.replace(">"," > "))}))}}]),a}(s.a.Component),ae=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"removeRangeFacetValue",value:function(e){this.props.announcePolite("Removed ".concat(e.value," filter.")),this.props.onChange(e,[])}},{key:"render",value:function(){var e=this,t=this.props.searchField,a=A()(t.value[0]);a.utc();var n=a.format("MM/DD/YYYY"),r=A()(t.value[1]);r.utc();var i=r.format("MM/DD/YYYY"),o=a.diff(r,"days")?"".concat(n," - ").concat(i):n;return s.a.createElement(ee,{onClick:function(){return e.removeRangeFacetValue(t.field)}},o)}}]),a}(s.a.Component),ne=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"removeTextValue",value:function(e){this.props.announcePolite("Removed search term ".concat(e.value,".")),this.props.onChange(e,null);var t=_.a.parse(window.location.search);t.search&&delete t.search;var a=_.a.stringify(t);if(window.history.pushState)if(a){var n="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?").concat(a);window.history.pushState({path:n},"",n)}else{var s="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname);window.history.pushState({path:s},"",s)}else window.location.search=a}},{key:"render",value:function(){var e=this,t=this.props.searchField;return s.a.createElement(ee,{onClick:function(){return e.removeTextValue(t.field)}},t.value)}}]),a}(s.a.Component),se=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.query.searchFields.filter((function(e){return e.value&&e.value.length>0})),a={"list-facet":te,"range-facet":ae,text:ne};return s.a.createElement(Z.c,null,(function(n){var r=n.announcePolite;return s.a.createElement(s.a.Fragment,null,t.length>0&&s.a.createElement("div",{className:"fs-applied-filters"},s.a.createElement("h2",{className:"screen-hide"},"Currently Applied Search Filters."),s.a.createElement("p",{className:"screen-hide"},"Click a filter to remove it from your search query."),t.filter((function(e){return!e.isHidden})).map((function(t,n){var i=a[t.type];return s.a.createElement(i,Object.assign({},e.props,{key:n,searchField:t,announcePolite:r}))}))))}))}}]),a}(s.a.Component),re=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={sort:"score"},n.onSelect=n.onSelect.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"onSelect",value:function(e){this.setState({sort:e.target.value});var t=e.target.value;this.props.sortFields.indexOf(t)<0?this.props.onChange(t,"desc"):this.props.onChange(t,null)}},{key:"render",value:function(){var e=this.props.sortFields;return 0===e.length?null:s.a.createElement("div",{className:"fs-search-scope"},s.a.createElement("div",{className:"fs-search-scope__filter"},s.a.createElement("label",{className:"fs-search-scope__label",htmlFor:"sort-by"},"Sort By"),s.a.createElement("select",{className:"fs-search-scope__select",id:"sort-by",name:"sort-by",onChange:this.onSelect,value:this.state.sort},e.map((function(e,t){return s.a.createElement("option",{value:e.field,key:t},e.label)})))))}}]),a}(s.a.Component),ie=Object(l.a)(Object(l.a)({},o.b),{},{searchFields:Object(l.a)(Object(l.a)({},o.b.searchFields),{},{text:D,"list-facet":M,"range-facet":K,container:V,currentQuery:se}),results:Object(l.a)(Object(l.a)({},o.b.results),{},{result:f,list:Y,paginate:J,resultCount:$}),sortFields:{menu:re}}),oe=a(278),le={Directory:function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.doc;t.highlight;return s.a.createElement("li",{className:"search-card search-card--directory",onClick:function(){return e.props.onSelect(a)}},a.ss_federated_image&&s.a.createElement("div",{className:"img"},s.a.createElement("img",{src:a.ss_federated_image})),s.a.createElement("div",{className:"text"},a.sm_department&&s.a.createElement("div",{className:"tags tags--comma"},s.a.createElement("p",null,Array.isArray(a.sm_department)?a.sm_department.map((function(e){return s.a.createElement("span",{className:"tag department"},e)})):s.a.createElement("span",{className:"tag department"},"BMC"))),s.a.createElement("h3",{className:"heading"},s.a.createElement("a",{href:this.getCanonicalLink(a),dangerouslySetInnerHTML:{__html:a.ss_federated_title}})),s.a.createElement("p",{className:"summary",dangerouslySetInnerHTML:{__html:a.ss_summary}}),s.a.createElement("div",{className:"meta tags tags--pipe"},s.a.createElement("cite",{className:"tags tags--list citation"},this.renderSitenameLinks(a.sm_site_name,a.sm_urls,a.ss_site_name)),s.a.createElement("span",{className:"tag type"},a.sm_federated_type))))}}]),a}(f),Conditions:function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.doc;t.highlight;return s.a.createElement("li",{className:"search-card search-card--condition",onClick:function(){return e.props.onSelect(a)}},a.ss_federated_image&&s.a.createElement("div",{className:"img"},s.a.createElement("img",{src:a.ss_federated_image})),s.a.createElement("div",{className:"text"},a.sm_department&&s.a.createElement("div",{className:"tags tags--comma"},s.a.createElement("p",null,Array.isArray(a.sm_department)?a.sm_department.map((function(e){return s.a.createElement("span",{className:"tag department"},e)})):s.a.createElement("span",{className:"tag department"},"BMC"))),s.a.createElement("h3",{className:"heading"},s.a.createElement("a",{href:this.getCanonicalLink(a),dangerouslySetInnerHTML:{__html:a.ss_federated_title}})),s.a.createElement("p",{className:"summary",dangerouslySetInnerHTML:{__html:a.ss_summary}}),s.a.createElement("div",{className:"meta tags tags--pipe"},s.a.createElement("cite",{className:"tags tags--list citation"},this.renderSitenameLinks(a.sm_site_name,a.sm_urls,a.ss_site_name)),s.a.createElement("span",{className:"tag type"},a.sm_federated_type))))}}]),a}(f),Treatment:function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.doc;t.highlight;return s.a.createElement("li",{className:"search-card search-card--treatment",onClick:function(){return e.props.onSelect(a)}},a.ss_federated_image&&s.a.createElement("div",{className:"img"},s.a.createElement("img",{src:a.ss_federated_image})),s.a.createElement("div",{className:"text"},a.sm_department&&s.a.createElement("div",{className:"tags tags--comma"},s.a.createElement("p",null,Array.isArray(a.sm_department)?a.sm_department.map((function(e){return s.a.createElement("span",{className:"tag department"},e)})):s.a.createElement("span",{className:"tag department"},"BMC"))),s.a.createElement("h3",{className:"heading"},s.a.createElement("a",{href:this.getCanonicalLink(a),dangerouslySetInnerHTML:{__html:a.ss_federated_title}})),s.a.createElement("p",{className:"summary",dangerouslySetInnerHTML:{__html:a.ss_summary}}),s.a.createElement("div",{className:"meta tags tags--pipe"},s.a.createElement("cite",{className:"tags tags--list citation"},this.renderSitenameLinks(a.sm_site_name,a.sm_urls,a.ss_site_name)),s.a.createElement("span",{className:"tag type"},a.sm_federated_type))))}}]),a}(f),Recipe:function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.doc;t.highlight;return s.a.createElement("li",{className:"search-card search-card--recipe",onClick:function(){return e.props.onSelect(a)}},a.ss_federated_image&&s.a.createElement("div",{className:"img"},s.a.createElement("img",{src:a.ss_federated_image})),s.a.createElement("div",{className:"text"},a.sm_department&&s.a.createElement("div",{className:"tags tags--comma"},s.a.createElement("p",null,Array.isArray(a.sm_department)?a.sm_department.map((function(e){return s.a.createElement("span",{className:"tag department"},e)})):s.a.createElement("span",{className:"tag department"},"BMC"))),s.a.createElement("h3",{className:"heading"},s.a.createElement("a",{href:this.getCanonicalLink(a),dangerouslySetInnerHTML:{__html:a.ss_federated_title}})),s.a.createElement("p",{className:"summary",dangerouslySetInnerHTML:{__html:a.ss_summary}}),s.a.createElement("div",{className:"meta tags tags--pipe"},s.a.createElement("cite",{className:"tags tags--list citation"},this.renderSitenameLinks(a.sm_site_name,a.sm_urls,a.ss_site_name)),s.a.createElement("span",{className:"tag date"},this.dateFormat(a.ds_federated_date)),s.a.createElement("span",{className:"tag type"},a.sm_federated_type))))}}]),a}(f)},ce=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).resetFilters=n.resetFilters.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"resetFilters",value:function(){var e,t=this.props.query,a="",n=Object(oe.a)(t.searchFields);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.field!==t.mainQueryField?(delete s.value,s.collapse=!0,Object.hasOwnProperty.call(s,"expandedHierarchies")&&(s.expandedHierarchies=[])):a=s.value}}catch(i){n.e(i)}finally{n.f()}var r={search:a};F.qs.addNewUrlToBrowserHistory(r),this.setState({query:t}),this.props.onSearchFieldChange()}},{key:"getResultByType",value:function(e){switch(e){case"directory":return le.Directory;case"conditions_treated":return le.Conditions;case"treatments":return le.Treatment;case"recipes":return le.Recipe}}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.customComponents,r=a.bootstrapCss,i=a.query,o=a.results,l=a.truncateFacetListsAt,c=a.options,u=a.onSearchFieldChange,d=a.onTextInputChange,m=a.onSortFieldChange,h=a.onPageChange,p=i.searchFields,f=i.sortFields,g=i.rows,v=i.start?i.start:0,_=n.searchFields.container,y=n.results.container,b=n.results.result,E=n.results.resultCount,w=n.results.header,C=n.results.list,S=n.results.pending,k=n.results.paginate,N=n.results.preloadIndicator,O=n.searchFields.currentQuery,j=n.sortFields.menu,F=ie.searchFields.text,x=o.pending?s.a.createElement(S,{bootstrapCss:r}):null,P="paginate"===i.pageStrategy?s.a.createElement(k,Object.assign({},this.props,{bootstrapCss:r,onChange:h})):null,D="cursor"===i.pageStrategy&&o.docs.length<o.numFound?s.a.createElement(N,this.props):null;return null!=this.props.options.pageTitle&&(e=s.a.createElement("h1",null,this.props.options.pageTitle)),s.a.createElement(Z.a,null,s.a.createElement("div",{className:"fs-container"},s.a.createElement("aside",{className:"fs-aside"},s.a.createElement(_,{bootstrapCss:r,onNewSearch:this.resetFilters,resultsCount:this.props.results.numFound,title:this.props.options.menuTitle},p.filter((function(e){return t.props.sidebarFilters.indexOf(e.field)>-1&&!e.isHidden})).map((function(e,a){var i=e.type,c=e.field,d=e.lowerBound,m=e.upperBound,h=n.searchFields[i],p=function(e,t,a,n,s){return"period-range-facet"===e?(t.facets[n]||[]).concat(t.facets[s]||[]):"list-facet"===e||"range-facet"===e?t.facets[a]||[]:null}(i,o,c,d,m);return s.a.createElement(h,Object.assign({key:a},t.props,e,{bootstrapCss:r,facets:p,truncateFacetListsAt:l,onChange:u}))})))),s.a.createElement("div",{className:"fs-main"},e,s.a.createElement("div",{className:"fs-search-form",autoComplete:"on"},s.a.createElement(F,Object.assign({},this.props,{autocomplete:c.autocomplete,field:"tm_rendered_item",label:"Enter search term:",onSuggest:d,onChange:u,value:p.find((function(e){return"tm_rendered_item"===e.field})).value})),s.a.createElement(O,Object.assign({},this.props,{onChange:u})),s.a.createElement(j,{bootstrapCss:r,onChange:m,sortFields:f})),s.a.createElement("p",{className:p.find((function(e){return"tm_rendered_item"===e.field})).value||this.props.options.showEmptySearchResults?"solr-search-results-container__prompt screen-hide":"solr-search-results-container__prompt"},this.props.options.searchPrompt||"Please enter a search term."),s.a.createElement("div",{className:p.find((function(e){return"tm_rendered_item"===e.field})).value||this.props.options.showEmptySearchResults?"solr-search-results-container__wrapper":"solr-search-results-container__wrapper screen-hide"},s.a.createElement(y,{bootstrapCss:r},s.a.createElement(w,{bootstrapCss:r},s.a.createElement(E,{bootstrapCss:r,numFound:o.numFound,start:v,rows:g,onChange:h,noResultsText:this.props.options.noResults||null,termValue:p.find((function(e){return"tm_rendered_item"===e.field})).value}),x),s.a.createElement(C,{bootstrapCss:r},o.docs.map((function(e,a){var n=t.getResultByType(e.sm_federated_type)||b;return s.a.createElement(n,{bootstrapCss:r,doc:e,fields:p,key:e.id||a,onSelect:t.props.onSelectDoc,resultIndex:a,rows:g,start:v,highlight:o.highlighting[e.id],hostname:t.props.options.hostname})})),D),P)))))}}]),a}(s.a.Component);ce.defaultProps={bootstrapCss:!0,customComponents:ie,pageStrategy:"paginate",rows:20,searchFields:[{type:"text",field:"*"}],sortFields:[],truncateFacetListsAt:-1,showCsvExport:!1,sidebarFilters:["sm_site_name","sm_federated_type","sm_department","ds_federated_date","sm_federated_terms"],options:{}};var ue=ce,de=(a(634),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=F.qs.getParsedQsAndParams(),n=a.parsed,s=a.params,r=e.state.query.searchFields;r.forEach((function(e){Object.prototype.hasOwnProperty.call(t,"mainQueryField")&&e.field===t.mainQueryField&&(e.value=n.search),F.filterFieldsWithQsState.find((function(t){return t===e.field}))&&(e=F.qs.setFieldStateFromQs({params:s,searchField:e})),void 0!==t.siteSearch&&"sm_site_name"===e.field&&void 0===e.value&&!1===e.isHidden&&(e.value=[t.siteSearch])})),e.state.query.start=e.state.query.start||0,e.sendQuery(e.state.query)}),me=document.getElementById("fs-root");me?Object.hasOwnProperty.call(me.dataset,"federatedSearchAppConfig")?function(e){var t={isD7:!1,proxyIsDisabled:!1,url:"",searchFields:[{label:"Enter Search Term:",field:"tm_rendered_item",type:"text",isHidden:!1},{label:"Site Name",field:"sm_site_name",type:"list-facet",collapse:!0,isHidden:!1},{label:"Type",field:"sm_federated_type",type:"list-facet",collapse:!0,isHidden:!1},{label:"Department",field:"sm_department",type:"list-facet",collapse:!0,isHidden:!1},{label:"Date",field:"ds_federated_date",type:"range-facet",collapse:!0,isHidden:!1},{label:"Federated Terms",field:"sm_federated_terms",type:"list-facet",hierarchy:!0,expandedHierarchies:[],isHidden:!1}],mainQueryField:"tm_rendered_item",sortFields:[{label:"Relevance",field:"score"},{label:"Date",field:"ds_federated_date"}],hl:{fl:"tm_rendered_item",usePhraseHighlighter:!0},pageStrategy:"paginate",rows:20,hostname:window.location.hostname,autocomplete:!1,filters:[]},a=Object.assign(t,e);e.hiddenSearchFields=e.hiddenSearchFields||[],a.searchFields=a.searchFields.map((function(t){return e.hiddenSearchFields.includes(t.field)&&(t.isHidden=!0),t}));var n=e.sm_site_name||!1;a.siteList=[],void 0!==e.siteSearch?a.searchFields.forEach((function(t){"sm_site_name"===t.field&&(t.isHidden||n.length<2)&&(a.siteList=[e.siteSearch])})):a.siteList=n,a.filters.push({field:"sm_site_name",type:"list-facet",value:a.siteList});var r=new o.a({isD7:a.isD7,proxyIsDisabled:a.proxyIsDisabled,url:a.url,userpass:a.userpass,searchFields:a.searchFields,sortFields:a.sortFields,pageStrategy:a.pageStrategy,rows:a.rows,hl:a.hl,mainQueryField:a.mainQueryField,filters:a.filters,onChange:function(e,t){return i.a.render(s.a.createElement(ue,Object.assign({},e,t,{customComponents:ie,bootstrapCss:!1,onSelectDoc:function(){},truncateFacetListsAt:-1,options:a})),document.getElementById("fs-root"))}});de(r,a),window.onpopstate=function(){de(r,a)}}(JSON.parse(me.dataset.federatedSearchAppConfig)):console.error("Federated Search React | Could not find a data-federated-search-app-config attribute on div#fs-root.  Please populate data-federated-search-app-config with search app configuration data."):console.error("Federated Search React | Could not find div#fs-root in which to load the search app.")}},[[635,1,2]]]);
//# sourceMappingURL=main.5845b1c8.chunk.js.map